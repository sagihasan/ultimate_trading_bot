from messaging import send_public_message, send_private_message, send_error_message
import time


def send_with_delay(message):
    print(f"שולח הודעה: {message[:30]}...")
    send_public_message(message)
    time.sleep(2)


# 1. איתות יומי
send_with_delay(
    "**איתות יומי לדוגמה:**\nמניית AAPL\nכניסה: $187.40\nסטופ: $181.80\nטייק: $198.50\n...\n"
)

# 2. ניהול מאקרו
send_with_delay(
    """**CPI ירד ל־3.2%**\nנתוני מאקרו חיוביים, הבוט קובע להישאר\nהבוט קובע: אין איתות היום – לא מתקיימים התנאים הנדרשים.\nאין מסחר בפועל – נפח נמוך מאוד, או חג/סופ״ש.\n\nזוהתה חולשה בעסקה פתוחה על AAPL – הבוט שוקל להישאר בעסקה.\nעדכון סטופ לוס ל־$182.40\nעדכון טייק פרופיט ל־$200.00\nההחלטה מבוססת על תזוזות אחרונות + שינויים ווליום\nהבוט קובע להישאר בעסקה, בזהירות.\n"""
)

# 3. אין איתות
send_with_delay(
    "**אין איתות – מה הסיבה?**\nVol נמוך מהרגיל, תנודתיות קורים משתנים\nהבוט מחליט: לא מאוד תומך, תנודות חזקות\n"
)

# 4. אין סגירת פוזיציה
send_with_delay(
    "**אין סגירת פוזיציה:**\nהבוט מזהה שהעסקה עדיין בתוקף ואין סיבה לצאת\n")

# 5. הודעת יציאה
send_with_delay(
    "**הבוט יצא מעסקה פתוחה – AAPL**\nהבוט קובע: סימני חולשה משמעותיים.\n")

# 6. ניתוח לילי
send_with_delay(
    "**ניתוח לילי – סיכום מצב:**\n• מדד הפחד (VIX): 14.3\n• S&P500: עלה ב־0.82%\n• נאום של פאוול ב־17:30\n\nהבוט לא שלח איתותים\nהבוט קובע להישאר\n"
)

# 7. פתיחת שבוע – הודעת 'שבוע טוב'
send_with_delay(
    """שבוע טוב!\nהבוט פתח את השבוע\nתעיין בשעה 12:00 בערוץ הפרטי – שלח סקירה של השבוע\n"""
)

# 8. איתות חוזר ועדכון ניהול עסקה
send_with_delay(
    """**איתות חוזר – AAPL**\nהבוט מזהה חולשה קלה – ממליץ לעדכן סטופ לוס ל־$182.40\nהבוט שוקל רווח – ממליץ לעדכן טייק פרופיט ל־$200.00\nההחלטה מבוססת על תזוזות אחרונות + שינוי ווליום\nהבוט קובע להישאר בעסקה, בזהירות.\n"""
)

# 9. דו"ח שבועי נשלח
send_with_delay("דו\"ח שבועי נשלח - PDF, Excel\nנשלח בערוץ הפרטי")

# 10. דו"ח חודשי נשלח
send_with_delay("דו\"ח חודשי נשלח - PDF, Excel\nנשלח בערוץ הפרטי")

# 11. התחלת בוקר
send_with_delay("**התחלת בוקר – 11:00**\nלוז טוב להערכת השוק\n")

# 12. עדכון אפטר מרקט
send_with_delay(
    "**02:10 – הלולאה הא פועלת היטב**\nהכל תקין בבדיקת אפטר מרקט\n")

# 13. שגיאת חישוב ברווח
send_with_delay("**שגיאת חישוב ברווח:**\nהשגיאה טופלה בהצלחה.\n")

# 14. אין צורך בפעולה
send_with_delay(
    "**אין צורך בפעולה**\nTSLA ירדה 1.2% – חולשה קלה\nאך אין סימני יציאה ברורים.\n"
)

# 15. גאפ צפוי
send_with_delay(
    "**גאפ צפוי מחר – AAPL**\nסוג: גאפ צפוי מהר – פתיחה חזקה\nהבוט מזהה גאפ חיובי של 3.5%\nזהו גאפ משמעותי – יתכן גאפ אנליסטים או חדשות\nהבוט קובע: לצאת מהשוק מבעוד מועד\n"
)

# 16. מאקרו תזכורת
send_with_delay(
    "**CPI – תזכורת למאקרו**\nהבוט מזכיר: נתונים צפויים ב־15:30\nההחלטה מבוססת על גרף מאקרו חודשי\n"
)

# 17. סקירת פתיחה יומית
send_with_delay(
    """**סקירת פתיחה יומית – 21:00**\n• ריבית של הפד ביום רביעי הקרוב\n• סקטור האנרגיה הוביל השבוע\n• השבוע צפי להתפוצצות בסקטור הטכנולוגיה\nהבוט קובע: לונגים בטאסדק־Nasdaq.\n"""
)


# 18. בדיקת שגיאה
def send_error_with_delay(message):
    print(f"שולח שגיאה: {message[:30]}...")
    send_error_message(message)
    time.sleep(2)


send_error_with_delay("בדיקת שגיאה – נשלחה בהצלחה לערוץ השגיאות")
